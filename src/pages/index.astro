---
import Layout from "../layouts/Layout.astro";
import SectionHeading from "../components/SectionHeading.astro";
import BlogCard from "../components/BlogCard.astro";
import ProjectCard from "../components/ProjectCard.astro";
import { getCollection } from "astro:content";

// Get latest blog posts from content collection
const allBlogPosts = await getCollection("blog");
const latestBlogPosts = allBlogPosts
  .sort(
    (a, b) => new Date(b.data.date).getTime() - new Date(a.data.date).getTime()
  )
  .slice(0, 2);

// Get latest projects from content collection
const allProjects = await getCollection("projects");
const latestProjects = allProjects
  .sort(
    (a, b) =>
      new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
  )
  .slice(0, 2);
---

<Layout title="Kabir Dikko - Cloud Engineer">
  <div class="page-container pt-0">
    <!-- Hero Section -->
    <section
      id="hero"
      class="min-h-[calc(100vh-2rem)] flex flex-col justify-center animate-on-scroll visible"
    >
      <div class="py-12 md:py-20 md:w-3/4">
        <div
          class="inline-block px-3 py-1 mb-6 text-xs font-semibold bg-primary/10 text-primary rounded-full border border-primary/20"
        >
          AWS Cloud Engineer
        </div>
        <h1 class="text-4xl md:text-6xl font-bold mb-6">
          <span class="text-gradient-primary">Kabir Dikko</span> â€” Building resilient
          <span class="text-primary">cloud infrastructure</span> for modern applications
        </h1>
        <p class="text-lg md:text-xl text-muted-foreground mb-8 md:w-3/4">
          I help companies design, implement, and maintain scalable, efficient,
          and resilient cloud infrastructure using AWS, Kubernetes, and modern
          DevOps practices.
        </p>
        <div class="flex flex-col sm:flex-row gap-4">
          <a
            href="/projects"
            class="px-6 py-3 bg-primary text-primary-foreground rounded-md font-medium hover:bg-primary/90 transition-colors inline-flex items-center group border border-primary/20 shadow-sm"
          >
            View My Work
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="ml-2 w-4 h-4 group-hover:translate-x-1 transition-transform"
              ><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg
            >
          </a>
          <a
            href="/contact"
            class="px-6 py-3 bg-accent/60 text-accent-foreground rounded-md font-medium hover:bg-accent/90 transition-colors border border-border/30 shadow-sm"
          >
            Get In Touch
          </a>
        </div>
      </div>
    </section>

    <!-- Services -->
    <section id="services" class="section animate-on-scroll visible">
      <SectionHeading
        title="My Expertise"
        subtitle="Specialized cloud and infrastructure services to help organizations build, deploy, and manage applications more efficiently."
      />

      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
        <div
          class="neo-glass p-6 transition-all duration-300 hover:translate-y-[-4px]"
        >
          <div
            class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 border border-primary/20"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-6 h-6 text-primary"
              ><path d="M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z"
              ></path></svg
            >
          </div>
          <h3 class="text-xl font-bold mb-2">AWS Cloud Solutions</h3>
          <p class="text-muted-foreground">
            Design and implementation of scalable cloud architectures on AWS,
            with Solutions Architect Professional expertise.
          </p>
        </div>

        <div
          class="neo-glass p-6 transition-all duration-300 hover:translate-y-[-4px]"
        >
          <div
            class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 border border-primary/20"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-6 h-6 text-primary"
              ><polyline points="16 18 22 12 16 6"></polyline><polyline
                points="8 6 2 12 8 18"></polyline></svg
            >
          </div>
          <h3 class="text-xl font-bold mb-2">Kubernetes & Containerization</h3>
          <p class="text-muted-foreground">
            Implementation and management of Kubernetes clusters with Certified
            Kubernetes Administrator expertise.
          </p>
        </div>

        <div
          class="neo-glass p-6 transition-all duration-300 hover:translate-y-[-4px]"
        >
          <div
            class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 border border-primary/20"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-6 h-6 text-primary"
              ><rect x="2" y="2" width="20" height="8" rx="2" ry="2"
              ></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"
              ></rect><line x1="6" x2="6.01" y1="6" y2="6"></line><line
                x1="6"
                x2="6.01"
                y1="18"
                y2="18"></line></svg
            >
          </div>
          <h3 class="text-xl font-bold mb-2">Data Engineering</h3>
          <p class="text-muted-foreground">
            Building data lakes, warehouses, and ETL pipelines using AWS
            services like Glue, Athena, Step Functions, and Redshift.
          </p>
        </div>

        <div
          class="neo-glass p-6 transition-all duration-300 hover:translate-y-[-4px]"
        >
          <div
            class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4 border border-primary/20"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-6 h-6 text-primary"
              ><line x1="18" x2="18" y1="20" y2="10"></line><line
                x1="12"
                x2="12"
                y1="20"
                y2="4"></line><line x1="6" x2="6" y1="20" y2="14"></line></svg
            >
          </div>
          <h3 class="text-xl font-bold mb-2">Infrastructure as Code</h3>
          <p class="text-muted-foreground">
            Automating infrastructure deployment and management using Terraform,
            CloudFormation, and other IaC tools.
          </p>
        </div>
      </div>
    </section>

    <!-- Recent Projects -->
    <section id="projects" class="section animate-on-scroll visible">
      <SectionHeading
        title="Recent Projects"
        subtitle="A selection of my recent DevOps and infrastructure projects."
      >
        <a
          href="/projects"
          class="text-primary hover:underline inline-flex items-center text-sm font-medium mt-2"
        >
          View all projects <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg
          >
        </a>
      </SectionHeading>

      <div class="grid md:grid-cols-2 gap-6">
        {
          latestProjects.map((project) => (
            <ProjectCard
              title={project.data.title}
              description={project.data.description}
              imageUrl={project.data.heroImage}
              tags={project.data.tags}
              repoUrl={project.data.repoUrl}
              liveUrl={project.data.liveUrl}
            />
          ))
        }
      </div>
    </section>

    <!-- Latest Blog Posts -->
    <section id="blog" class="section animate-on-scroll visible">
      <SectionHeading
        title="Latest Articles"
        subtitle="Technical insights, tutorials, and best practices on DevOps, cloud infrastructure, and more."
      >
        <a
          href="/blog"
          class="text-primary hover:underline inline-flex items-center text-sm font-medium mt-2"
        >
          View all articles <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="w-4 h-4"><path d="m9 18 6-6-6-6"></path></svg
          >
        </a>
      </SectionHeading>

      <div class="grid md:grid-cols-2 gap-6">
        {
          latestBlogPosts.map((post) => (
            <BlogCard
              title={post.data.title}
              excerpt={post.data.excerpt}
              date={post.data.date}
              readTime={`${Math.ceil(post.data.excerpt.length / 500)} min read`}
              category={post.data.category}
              slug={post.slug}
              imageUrl={post.data.image}
            />
          ))
        }
      </div>
    </section>
  </div>
</Layout>

<script>
  // Animation on scroll
  document.addEventListener("DOMContentLoaded", () => {
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("visible");
          }
        });
      },
      { threshold: 0.1 }
    );

    const sections = document.querySelectorAll(".animate-on-scroll");
    sections.forEach((section) => observer.observe(section));
  });
</script>
